<div class="client-list-container">
  <header class="header">
    <div class="title-section">
      <h1>Gerenciar Clientes</h1>
      <p class="subtitle">Sistema de Controle de Clientes e Placas</p>
    </div>
    <button mat-raised-button color="primary" (click)="openCreateClientDialog()">
      <mat-icon>add</mat-icon>
      Adicionar Cliente
    </button>
  </header>

  <mat-form-field class="search-field" appearance="outline">
    <mat-label>Buscar cliente...</mat-label>
    <input #searchInput matInput (input)="filterClientsBySearchTerm(searchInput.value)" />
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>

  @if (isLoadingClients) {
    <div class="loading-shade">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
  }

  @if (loadErrorMessage) {
    <mat-card class="error-card">
      <mat-card-content>
        <mat-icon>error</mat-icon>
        <span>{{ loadErrorMessage }}</span>
      </mat-card-content>
    </mat-card>
  }

  <div class="clients-grid">
    @for (client of displayedClients; track client.id) {
      <mat-card class="client-card">
        <mat-card-header>
          <mat-icon mat-card-avatar class="card-icon">person</mat-icon>
          <mat-card-title>{{ client.nome }}</mat-card-title>
          <mat-card-subtitle>ID: {{ client.id }}</mat-card-subtitle>
          <span class="spacer"></span>
          <div class="actions">
            <button mat-icon-button (click)="editClient(client)" matTooltip="Editar">
              <mat-icon>edit</mat-icon>
            </button>
            <button
              mat-icon-button
              color="warn"
              (click)="deleteClient(client.id)"
              matTooltip="Excluir"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </mat-card-header>

        <mat-card-content>
          <dl class="info-group">
            <div class="info-item">
              <mat-icon>phone</mat-icon>
              <dd>{{ client.telefone }}</dd>
            </div>
            <div class="info-item">
              <mat-icon>credit_card</mat-icon>
              <dd>{{ client.cpf }}</dd>
            </div>
            <div class="info-item">
              <mat-icon>directions_car</mat-icon>
              <dd class="placa-badge">{{ client.placa | uppercase }}</dd>
            </div>
          </dl>
        </mat-card-content>
      </mat-card>
    } @empty {
      @if (!isLoadingClients && !loadErrorMessage) {
        <div class="empty-state">
          <mat-icon class="empty-icon">people_outline</mat-icon>
          <h3>Nenhum cliente encontrado</h3>
          <p>Clique em "Adicionar Cliente" para come√ßar</p>
        </div>
      }
    }
  </div>
</div>
